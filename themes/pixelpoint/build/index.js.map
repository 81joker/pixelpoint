{"version":3,"file":"index.js","mappings":"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","sources":["webpack://pixelpoint/./src/modules/Search.js","webpack://pixelpoint/external window \"jQuery\"","webpack://pixelpoint/webpack/bootstrap","webpack://pixelpoint/webpack/runtime/compat get default export","webpack://pixelpoint/webpack/runtime/define property getters","webpack://pixelpoint/webpack/runtime/hasOwnProperty shorthand","webpack://pixelpoint/webpack/runtime/make namespace object","webpack://pixelpoint/./src/index.js"],"sourcesContent":["import $ from \"jquery\";\n\nclass Search {\n  constructor() {\n    this.resultsDiv = $(\"#input-overlay__results\");\n    this.openButton = $(\".input-search-trigger\");\n    this.searchOverlay = $(\".input-overlay\");\n    this.searchField = $(\"#form1\");\n    this.startDateField = $(\"#start-date\");\n    this.endDateField = $(\"#end-date\");\n    this.isOverlayOpen = false;\n    this.isSpinnerVisible = false;\n    this.previousValue = \"\";\n    this.typingTimer = null;\n\n    // Load all data initially\n    this.getResults(); \n\n    this.events();\n  }\n\n  events() {\n    this.openButton.on(\"click\", this.openOverlay.bind(this));\n    $(document).on(\"keydown\", this.keyPressDispatcher.bind(this));\n    this.searchField.on(\"keydown\", this.typingLogic.bind(this));\n    this.startDateField.on(\"change\", this.typingLogic.bind(this));\n    this.endDateField.on(\"change\", this.typingLogic.bind(this));\n  }\n\n  typingLogic() {\n    clearTimeout(this.typingTimer);\n    const searchValue = this.searchField.val().trim().toLowerCase();\n    const startDate = this.startDateField.val();\n    const endDate = this.endDateField.val();\n\n    if (searchValue || startDate || endDate) {\n      if (!this.isSpinnerVisible) {\n        this.resultsDiv.html(`<div class=\"spinner-border text-secondary\" role=\"status\" style=\"max-width:2rem\"><span class=\"sr-only\">Loading...</span></div>`);\n        this.isSpinnerVisible = true;\n      }\n      this.typingTimer = setTimeout(() => this.getResults(searchValue, startDate, endDate), 2000);\n    } else {\n      // If search field is cleared, display all data again\n      this.getResults();  \n    }\n\n    this.previousValue = searchValue;\n  }\n\n  getResults(searchQuery = \"\", startDate = \"\", endDate = \"\", pageSize = 8, pageNumber = 1) {\n    const baseUrl = \"https://data.carinthia.com/api/v4/endpoints/557ea81f-6d65-6476-9e01-d196112514d2\";\n    const token = \"9962098a5f6c6ae8d16ad5aba95afee0\";\n\n    let queryParams = `?include=image&token=${token}&page[size]=${pageSize}&page[number]=${pageNumber}`;\n\n    if (searchQuery) {\n      queryParams += `&search=${encodeURIComponent(searchQuery)}`; \n    }\n\n    const apiUrl = baseUrl + decodeURI(queryParams);\n\n    $.getJSON(apiUrl, function(data) {\n      const filteredData = data[\"@graph\"].filter(item => {\n        let matchesSearch = searchQuery ? item.name && item.name.toLowerCase().includes(searchQuery) : true;\n        let matchesDateRange = true;\n\n        if (startDate || endDate) {\n          const itemStartDate = new Date(item.startDate);\n          const itemEndDate = item.endDate ? new Date(item.endDate) : itemStartDate;\n\n          if (startDate) {\n            matchesDateRange = matchesDateRange && itemEndDate >= new Date(startDate);\n          }\n          if (endDate) {\n            matchesDateRange = matchesDateRange && itemStartDate <= new Date(endDate);\n          }\n        }\n\n        return matchesSearch && matchesDateRange;\n      });\n\n      const card = filteredData.map(item => `\n        <div class=\"col\">\n        <div class=\"card\" style=\"width: 18rem; margin: 3px;\">\n          <img class=\"card-img-top\" src=\"${item.image && item.image[0] && item.image[0].contentUrl\n              ? item.image[0].contentUrl\n              : \"img/schedule/schedule-2.jpg\"\n          }\" alt=\"Card image cap\">\n          <div class=\"card-body\">\n            <h5 class=\"card-title\">${item.name}</h5>\n            <p class=\"card-text\">\n              ${item.description ? item.description.substring(0, 100) : \"\"}\n            </p>\n            <a href=\"#\" class=\"btn btn-primary\">Go somewhere</a>\n          </div>\n          </div>\n        </div>\n      `).join(\"\");\n\n      this.resultsDiv.html(card);\n      this.isSpinnerVisible = false;\n    }.bind(this));\n  }\n\n  keyPressDispatcher(e) {\n    if (e.keyCode == 83 && !this.isOverlayOpen && !$(\"input, textarea\").is(\":focus\")) {\n      this.openOverlay();\n    }\n\n    if (e.keyCode == 27 && this.isOverlayOpen) {\n      this.closeOverlay();\n    }\n  }\n\n  openOverlay() {\n    this.searchOverlay.addClass(\"input-overlay--active\");\n    this.isOverlayOpen = true;\n  }\n\n  closeOverlay() {\n    this.searchOverlay.removeClass(\"input-overlay--active\");\n    this.isOverlayOpen = false;\n  }\n}\n\nexport default Search;\n","module.exports = window[\"jQuery\"];","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId](module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","// import \"../css/style.scss\"\n\n// Our modules / classes\nimport Search from \"./modules/Search\"\n\n\n// Instantiate a new object using our modules/classes\nconst search = new Search()\n\n"],"names":["$","Search","constructor","resultsDiv","openButton","searchOverlay","searchField","startDateField","endDateField","isOverlayOpen","isSpinnerVisible","previousValue","typingTimer","getResults","events","on","openOverlay","bind","document","keyPressDispatcher","typingLogic","clearTimeout","searchValue","val","trim","toLowerCase","startDate","endDate","html","setTimeout","searchQuery","pageSize","pageNumber","baseUrl","token","queryParams","encodeURIComponent","apiUrl","decodeURI","getJSON","data","filteredData","filter","item","matchesSearch","name","includes","matchesDateRange","itemStartDate","Date","itemEndDate","card","map","image","contentUrl","description","substring","join","e","keyCode","is","closeOverlay","addClass","removeClass","search"],"sourceRoot":""}